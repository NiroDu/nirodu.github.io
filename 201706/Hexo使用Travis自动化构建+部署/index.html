<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> ✡ Hexo 使用 Travis 自动化构建+部署 · Niro | 逆。</title><meta name="description" content="✡ Hexo 使用 Travis 自动化构建+部署 - NiroDu"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="https://nirodu.com/atom.xml" title="Niro | 逆。"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="//nirodu.com/n-book" target="_self" class="nav-list-link">N-BOOK</a></li><li class="nav-list-item"><a href="https://github.com/nirodu" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container animated fadeInDown"><div class="post"><article class="post-block"><h1 class="post-title">✡ Hexo 使用 Travis 自动化构建+部署</h1><div class="post-info">2017年6月11日</div><div class="post-content"><p>把本地构建和部署的工作交给线上的 <a href="https://travis-ci.org/" target="_blank" rel="noopener">Travis</a> 的服务器去做，实现不管在哪台电脑上都可以直接从仓库下载源码去编辑，实时更新自己的博客。</p>
<a id="more"></a>
<h2 id="自动化构建-部署概述："><a href="#自动化构建-部署概述：" class="headerlink" title="自动化构建+部署概述："></a><strong>自动化构建+部署概述：</strong></h2><p>Travis 会在你每一次 git 提交之后会生成一个虚拟环境来执行我们编写的脚本任务，脚本执行的内容写在<code>.travis.yml</code>文件中。</p>
<p>这样只要你使用 git 提交了更改，就可以让 Travis 在线上替你执行 <code>Hexo generate</code>+<code>Hexo deploy</code> 的命令，如此一来，我们在不同的电脑上想要编辑博客，只需使用 Markdown 工具写好 <code>.md</code> 文件，使用 git 上传博客的源文件，其他的就交给 Travis，让它去获取 github 仓库上代码的更新并拉取，执行脚本任务：“部署博客内容，并完成更新上线。”</p>
<h2 id="基础知识"><a href="#基础知识" class="headerlink" title="基础知识"></a><strong>基础知识</strong></h2><p>在操作前需要先熟悉三个方面的知识点。</p>
<h3 id="1、HEXO命令"><a href="#1、HEXO命令" class="headerlink" title="1、HEXO命令"></a><strong>1、HEXO命令</strong></h3><p>可在此了解 <a href="/2017/03/10/Hexo初入记载/" target="_blank">Hexo 初入记载</a></p>
<h3 id="2、GIT命令"><a href="#2、GIT命令" class="headerlink" title="2、GIT命令"></a><strong>2、GIT命令</strong></h3><p>可在此了解 <a href="http://www.ruanyifeng.com/blog/2014/06/git_remote.html" target="_blank">Git远程操作详解</a></p>
<h3 id="3、SSH-Key"><a href="#3、SSH-Key" class="headerlink" title="3、SSH Key"></a><strong>3、SSH Key</strong></h3><p>可在此了解 <a href="/2017/06/03/SSH-key/" target="_blank">SSH Key浅析</a></p>
<h2 id="前提"><a href="#前提" class="headerlink" title="前提"></a><strong>前提</strong></h2><p>在 github 仓库创建两个分支: 一个 <code>master</code>(用于部署，hexo构建后的网页代码) 和一个 <code>dev</code>(用于构建，博客的源码)。</p>
<p><img src="/img/Travis/branch.png" alt="Branch"></p>
<p><strong>以下配置都以 MAC OSX 系统为环境进行配置。</strong> </p>
<h2 id="第一步、配置SSH密钥"><a href="#第一步、配置SSH密钥" class="headerlink" title="第一步、配置SSH密钥"></a><strong>第一步、配置SSH密钥</strong></h2><h3 id="一-生成SSH密钥"><a href="#一-生成SSH密钥" class="headerlink" title="(一) 生成SSH密钥"></a>(一) 生成SSH密钥</h3><blockquote>
<p>使用SSH Key可免去在Github上Hexo部署时得输入密码，但要注意的是，这个SSH key不应是github账号的全局SSH key，因为这样Travis CI就获得了你所有代码库的提交权限。</p>
</blockquote>
<p>应该使用 <strong>单个项目的ssh密钥</strong>，添加至<code>https://github.com/用户名/项目名/settings/keys</code>的 Deploy keys，这样就限制了Travis CI的权限。</p>
<p>生成单个项目的ssh密钥命令：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ~/.ssh</span><br><span class="line">$ ssh-keygen -t rsa -C <span class="string">"nirodu1219@outlook.com"</span></span><br></pre></td></tr></table></figure></p>
<p>在执行生成密钥的过程中会提示如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Generating public/private rsa key pair.</span><br><span class="line">Enter file in which to save the key (/Users/your_user_directory/.ssh/id_rsa):</span><br><span class="line">Enter passphrase (empty for no passphrase):</span><br><span class="line">Enter same passphrase again:</span><br></pre></td></tr></table></figure></p>
<p>其中，<u>Enter file in which to save the key (/Users/your_user_directory/.ssh/id_rsa):</u><br>假如直接按回车则会在默认的<code>.ssh/</code>目录下生成<code>id_rsa</code>和<code>id_rsa.pub</code>文件。</p>
<p>为了区别这是专为Travis生成的密钥，我们在这一步输入路径和文件名：<code>/Users/nirodu/.ssh/id_rsa_forTravic</code></p>
<p>然后会在<code>.ssh/</code>目录下生成<code>id_rsa_forTravic</code>和<code>id_rsa_forTravic.pub</code>两个文件。<br><br></p>
<h3 id="二-添加-SSH-Key-到项目的-Deploy-keys"><a href="#二-添加-SSH-Key-到项目的-Deploy-keys" class="headerlink" title="(二)  添加 SSH Key 到项目的 Deploy keys"></a>(二)  添加 SSH Key 到项目的 Deploy keys</h3><p>登录到 github 中，进入到博客仓库。<br>点击右上方的 <code>Settings</code> 进入到设置页面，再点击左侧 <code>Deploy keys</code> 项。</p>
<p>给 <strong>Title</strong> 取个名字，打开<code>id_rsa_forTravic.pub</code>文件，复制里面的内容到<strong>Key文本框</strong>，勾选 <strong>Allow write access</strong>，点击 <strong>Add key</strong> 确认添加。</p>
<p><img src="/img/Travis/deploy_keys.png" alt="Deploy keys"></p>
<p><br></p>
<h3 id="三-新建-SSH-配置文件"><a href="#三-新建-SSH-配置文件" class="headerlink" title="(三) 新建 SSH 配置文件"></a>(三) 新建 SSH 配置文件</h3><p>然后在 <code>.ssh/</code> 文件夹中创建一个名为 <code>config</code> 的配置文件。</p>
<blockquote>
<p><strong>配置 config 的作用：</strong><br>为不同网站应用各自的 SSH KEY。</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ~/.ssh</span><br><span class="line">$ touch config</span><br></pre></td></tr></table></figure>
<p>用编辑器打开 <code>config</code> 文件，添加如下信息：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># github</span><br><span class="line">Host github.com</span><br><span class="line">HostName github.com</span><br><span class="line">PreferredAuthentications publickey</span><br><span class="line">IdentityFile ~/.ssh/id_rsa</span><br><span class="line"></span><br><span class="line"># github_blog</span><br><span class="line">Host github.com</span><br><span class="line">HostName github.com</span><br><span class="line">PreferredAuthentications publickey</span><br><span class="line">IdentityFile ~/.ssh/id_rsa_forTravic</span><br></pre></td></tr></table></figure>
<p>提示：这里的密钥文件会根据配置相应修改，把对应的公钥添加至对应的网站（host）上面。<br>未加入配置文件的网站会自动应用默认的<code>id_rsa</code>。</p>
<h2 id="第二步、配置-Travis"><a href="#第二步、配置-Travis" class="headerlink" title="第二步、配置 Travis"></a><strong>第二步、配置 Travis</strong></h2><h3 id="一-Travis-CI-官网配置"><a href="#一-Travis-CI-官网配置" class="headerlink" title="(一) Travis CI 官网配置"></a>(一) Travis CI 官网配置</h3><p>打开<a href="https://travis-ci.org/" target="_blank" rel="noopener">Travis CI</a>，使用github账号登录。</p>
<p>跟着 Travis 官网的提示，添加一个 Repositories，找到博客项目，开启 travis 支持。</p>
<p><img src="/img/Travis/add_repositories.png" alt="Add repositories"></p>
<p>然后点击设置按钮，在项目的设置中开启 <code>Build only if .travis.yml is present</code>.</p>
<h3 id="二-本地-Travis-CI-操作"><a href="#二-本地-Travis-CI-操作" class="headerlink" title="(二) 本地 Travis CI 操作"></a>(二) 本地 Travis CI 操作</h3><p><strong>（ 1 ）首先打开终端，安装travis（要先安装好Ruby和gem环境）。</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ gem install travis</span><br></pre></td></tr></table></figure>
<p><br></p>
<p><strong>（ 2 ）然后到博客项目文件夹，在</strong>项目根目录<strong>新建 <code>.travis.yml</code> 配置文件。</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> 博客项目文件夹根目录</span><br><span class="line">$ touch .travis.yml</span><br></pre></td></tr></table></figure>
<blockquote>
<p>有可能会提示：Names that begin with a dot “.” are reserved for the system.<br>  这是以 <code>.</code> 开头命名的文件在系统中是默认保留的，用这样的的命名方式的文件会自动隐藏。</p>
</blockquote>
<p>将系统隐藏文件显示出来也很简单，只需要在终端输入以下命令：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ defaults write com.apple.Finder AppleShowAllFiles YES </span><br><span class="line">$ killall Finder</span><br></pre></td></tr></table></figure></p>
<p>即可显示系统隐藏文件，若想继续隐藏则把 “YES” 改成 “NO” 就行。<br><br></p>
<p><strong>（ 3 ）在博客项目文件夹，在</strong>项目根目录<strong>创建<code>.travis</code>文件夹。</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir .travis</span><br></pre></td></tr></table></figure></p>
<p>把刚才在 <code>.ssh</code> 目录下生成的 <code>id_rsa_forTravic</code> 私钥复制到 <code>.travis文件夹</code> 下：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ cp ~/.ssh/id_rsa_forTravic .travis/</span><br></pre></td></tr></table></figure></p>
<p>然后新建SSH配置文件 <code>ssh_config</code> 到<code>.travis文件夹</code>：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ touch .travis/ssh_config</span><br></pre></td></tr></table></figure></p>
<p>编辑配置文件，添加如下内容：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Host github.com</span><br><span class="line">User git</span><br><span class="line">StrictHostKeyChecking no</span><br><span class="line">IdentityFile ~/.ssh/id_rsa</span><br><span class="line">IdentitiesOnly yes</span><br></pre></td></tr></table></figure></p>
<div class="tip"><br>这个配置文件，是在线上 Travis 虚拟环境构建过程中使用的，路径不是本地机的，是以Travis虚拟机为根目录的路径。所以路径和名字可大胆命名为  <code>~/.ssh/id_rsa</code><br></div>

<p><strong>（ 4 ）Travis 加密操作</strong></p>
<blockquote>
<p>要加密的原因很简单，Travis 需要取得足够的权限才能对 Github仓库 进行操作，我们在博客仓库里添加过一个公钥 <code>id_rsa_forTravic.pub</code>，Travis需要取得私钥 <code>id_rsa_forTravic</code> 才能通过认证，进行构建部署。而假如直接把私钥文件上传到开源的Github上，被别人下载到未加密的私钥文件，那这个仓库的控制权就是共享的了…</p>
</blockquote>
<p>首先是用终端登录Travis账号，再使用命令对私钥进行加密。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ travis login --auto</span><br></pre></td></tr></table></figure></p>
<p>然后会提示输入github的用户名和密码。<br>或者是弹框请求允许读取信息，都选同意。</p>
<p><strong>加密操作（这一步容易出现各种问题，请按如下命令操作。）</strong></p>
<p>打开终端，进到 <code>.travis 文件夹</code>目录下执行：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ travis encrypt-file id_rsa_forTravic --add -r NiroDu/nirodu.github.io</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p><code>NiroDu/nirodu.github.io</code> 替换成你的 <code>账户名/博客仓库名</code>。</p>
</blockquote>
<p>执行后会在当前目录<code>.travis 文件夹</code>下生成加密之后的私钥文件 <code>id_rsa_forTravic.enc</code>，然后删除 <code>id_rsa_forTravic</code> 私钥文件（私钥不泄露）。</p>
<p>同时，在<code>.travis.yml</code>文件中会插入这么一个语句：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl aes-256-cbc -K $encrypted_xxxxxxxxxxx_key -iv $encrypted_xxxxxxxxxxx_iv</span><br></pre></td></tr></table></figure></p>
<p>这是线上用来给<code>id_rsa_forTravic.enc</code>解密的信息。</p>
<p>执行完加密后，在Travis系统的设置中，多了Environment Variables，即解密用的两串信息。</p>
<p><img src="/img/Travis/travis_key.png" alt="travis_key"></p>
<h3 id="三-编辑-travis-yml配置文件"><a href="#三-编辑-travis-yml配置文件" class="headerlink" title="(三) 编辑.travis.yml配置文件"></a>(三) 编辑<code>.travis.yml</code>配置文件</h3><p>打开Travis配置文件 <code>.travis.yml</code>，添加执行脚本（虚拟机用）：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">language:</span> <span class="string">node_js</span></span><br><span class="line"><span class="attr">node_js:</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">'6'</span>  <span class="comment"># nodejs的版本</span></span><br><span class="line"><span class="attr">branches:</span></span><br><span class="line"><span class="attr">  only:</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">dev</span> <span class="comment"># 设置博客源代码分支（检测这个分支有改动，则自动化部署到master分支）</span></span><br><span class="line"><span class="attr">before_install:</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">export</span> <span class="string">TZ='Asia/Shanghai'</span> <span class="comment"># 设置时区</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">npm</span> <span class="string">install</span> <span class="bullet">-g</span> <span class="string">hexo</span> <span class="comment"># 虚拟机安装hexo</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">npm</span> <span class="string">install</span> <span class="bullet">-g</span> <span class="string">hexo-cli</span> <span class="comment"># 虚拟机安装hexo命令行工具</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">openssl</span> <span class="string">aes-256-cbc</span> <span class="bullet">-K</span> <span class="string">$encrypted_dc70c6c06754_key</span> <span class="bullet">-iv</span> <span class="string">$encrypted_dc70c6c06754_iv</span> <span class="bullet">-in</span> <span class="string">.travis/id_rsa_forTravic.enc</span> <span class="bullet">-out</span> <span class="string">~/.ssh/id_rsa</span> <span class="bullet">-d</span> <span class="comment"># 修改Travis自动插入的解密指令，将解密后的私钥导出在虚拟机中，即 ~/.ssh/id_rsa</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">chmod</span> <span class="number">600</span> <span class="string">~/.ssh/id_rsa</span> <span class="comment"># 设置id_rsa文件权限</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">eval</span> <span class="string">$(ssh-agent)</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">ssh-add</span> <span class="string">~/.ssh/id_rsa</span> <span class="comment"># 将密钥加入系统</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">cp</span> <span class="string">.travis/ssh_config</span> <span class="string">~/.ssh/config</span> <span class="comment"># 将之前创建的ssh_config复制到Travis的虚拟机中去</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">git</span> <span class="string">config</span> <span class="bullet">--global</span> <span class="string">user.name</span> <span class="string">"NiroDu"</span> <span class="comment"># 设置github账户信息</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">git</span> <span class="string">config</span> <span class="bullet">--global</span> <span class="string">user.email</span> <span class="string">nirodu1219@outlook.com</span></span><br><span class="line"><span class="attr">install:</span> <span class="comment"># 安装依赖组件</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">npm</span> <span class="string">install</span> <span class="comment"># 虚拟机安装依赖</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">npm</span> <span class="string">install</span> <span class="string">hexo-deployer-git</span> <span class="bullet">--save</span> <span class="comment"># 虚拟机安装hexo-deployer-git插件，以解决hexo+git上传时容易出现的问题</span></span><br><span class="line"><span class="attr">script:</span> <span class="comment"># 执行的命令</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">hexo</span> <span class="string">clean</span> <span class="string">&amp;&amp;</span> <span class="string">hexo</span> <span class="string">g</span> <span class="bullet">-d</span> <span class="comment"># 虚拟机执行生成&amp;部署命令</span></span><br></pre></td></tr></table></figure>
<h3 id="至此-Travis-配置完成。"><a href="#至此-Travis-配置完成。" class="headerlink" title="至此 Travis 配置完成。"></a><strong>至此 Travis 配置完成。</strong></h3><h2 id="第三步、Git-Hexo-其余配置"><a href="#第三步、Git-Hexo-其余配置" class="headerlink" title="第三步、Git/Hexo 其余配置"></a><strong>第三步、Git/Hexo 其余配置</strong></h2><blockquote>
<p><strong>再强调一遍，也是网上教程令人困惑的地方。要实现Travis自动化构建，得在Github上创建两个分支:</strong><br>1、默认的master分支，用来存放hexo编译后的网页文件。<br>2、自定义命名的分支dev，用于存放hexo博客源码，并把它设置为xx.github.io博客仓库的默认分支，Github的push和pull都在这个分支进行。<br>并且 dev 分支由 Travis 检测，一旦有改动，Travis 会自动拉取 dev 中的代码进行自动化构建+部署。</p>
</blockquote>
<p>所以，在博客根目录下的<code>_config.yml</code>文件中deploy配置的分支是master：<br><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line"><span class="attr">  type:</span> <span class="string">git</span></span><br><span class="line"><span class="attr">  repo:</span> <span class="string">git@github.com:NiroDu/nirodu.github.io.git</span></span><br><span class="line"><span class="attr">  branch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure></p>
<p>在<code>.travis.yml</code>中配置的分支是dev：<br><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">branches:</span></span><br><span class="line"><span class="attr">  only:</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">dev</span></span><br></pre></td></tr></table></figure></p>
<h3 id="（一）-构建博客目录"><a href="#（一）-构建博客目录" class="headerlink" title="（一） 构建博客目录"></a>（一） 构建博客目录</h3><p>我是这样执行的：</p>
<p><strong>1、在Github创建好两个新的分支后。</strong></p>
<p><strong>2、拉取dev分支到本地:</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> git@github.com:NiroDu/nirodu.github.io.git</span><br></pre></td></tr></table></figure></p>
<p>该操作会产生一个<code>nirodu.github.io</code>文件夹。</p>
<p><strong>3、新建一个文件夹<code>temp</code>并把它初始化为Hexo文件夹</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo init</span><br></pre></td></tr></table></figure></p>
<p><strong>4、再把里面的内容拷贝到<code>nirodu.github.io</code>文件夹。</strong></p>
<p>这么做的原因是<code>hexo init</code>命令会把整个文件夹初始化，会删掉的.git文件夹和git配置，导致无法正常用git进行pull和push。<br>保持<code>nirodu.github.io</code>文件夹不动，拷贝hexo的文件过来即可顺利上传博客源码文件。</p>
<h3 id="（二）-上传到Github"><a href="#（二）-上传到Github" class="headerlink" title="（二） 上传到Github"></a>（二） 上传到Github</h3><p>进入到博客根目录，执行：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git add .</span><br><span class="line">$ git commit -m <span class="string">"travis upload"</span></span><br><span class="line">$ git push -u origin dev</span><br></pre></td></tr></table></figure>
<h3 id="（三）-到Travis执行后台查看构建生成情况。"><a href="#（三）-到Travis执行后台查看构建生成情况。" class="headerlink" title="（三） 到Travis执行后台查看构建生成情况。"></a>（三） 到<a href="https://travis-ci.org/" target="_blank" rel="noopener">Travis执行后台</a>查看构建生成情况。</h3><p>完。</p>
</div></article></div></main><footer><div class="paginator"><a href="/201707/微信表情-头像/" class="prev">PREV</a><a href="/201706/SSH-key/" class="next">NEXT</a></div><div class="copyright"><p>© 2016 - 2018 <a href="https://nirodu.com">NiroDu</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>