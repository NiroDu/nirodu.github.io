<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 一台电脑配置多个用户身份，多个SSH KEY · Niro | 逆。</title><meta name="description" content="一台电脑配置多个用户身份，多个SSH KEY - NiroDu"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="https://nirodu.com/atom.xml" title="Niro | 逆。"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="//nirodu.com/n-book" target="_self" class="nav-list-link">N-BOOK</a></li><li class="nav-list-item"><a href="https://github.com/nirodu" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container animated fadeInDown"><div class="post"><article class="post-block"><h1 class="post-title">一台电脑配置多个用户身份，多个SSH KEY</h1><div class="post-info">2017年6月3日</div><div class="post-content"><p>关于SSH Key的一些配置操作。</p>
<a id="more"></a>
<h2 id="生成-SSH-KEY"><a href="#生成-SSH-KEY" class="headerlink" title="生成 SSH KEY"></a>生成 SSH KEY</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ ssh-keygen -t rsa -C &quot;your_email@example.com&quot;</span><br><span class="line"></span><br><span class="line">Generating public/private rsa key pair.</span><br><span class="line">Enter file in which to save the key (/Users/your_user_directory/.ssh/id_rsa):</span><br><span class="line">Enter passphrase (empty for no passphrase):</span><br><span class="line">Enter same passphrase again:</span><br></pre></td></tr></table></figure>
<p><a href="mailto:your_email@example.com" target="_blank" rel="noopener">your_email@example.com</a> 改成自己的邮箱。</p>
<p>输入文件名，如果直接按回车则会默认自动生成私钥和公钥：id_rsa、id_rsa.pub。</p>
<p>接着跟着的是输入密码和确认密码。<br>密码输入成功后出现如下提示，表示创建成功：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Your identification has been saved in /Users/your_user_directory/.ssh/id_rsa.</span><br><span class="line">Your public key has been saved in /Users/your_user_directory/.ssh/id_rsa.pub.</span><br><span class="line">The key fingerprint is:</span><br><span class="line">fingerprint值 your_email@example.com</span><br><span class="line">The key&apos;s randomart image is:</span><br><span class="line"> +--[ RSA 2048]----+</span><br><span class="line"> | .+ + |</span><br><span class="line"> | =oO. |</span><br><span class="line"> ...</span><br></pre></td></tr></table></figure></p>
<p><strong>注意：<br>上方的命令执行多次则会生成多个 SSH KEY 文件。如下：</strong></p>
<h2 id="生成多个SSH-KEY的操作方式："><a href="#生成多个SSH-KEY的操作方式：" class="headerlink" title="生成多个SSH KEY的操作方式："></a>生成多个SSH KEY的操作方式：</h2><h3 id="新建第一个-SSH-key："><a href="#新建第一个-SSH-key：" class="headerlink" title="新建第一个 SSH key："></a>新建第一个 SSH key：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ssh-keygen -t rsa -C &quot;user1@email.com&quot;</span><br></pre></td></tr></table></figure>
<p>一路回车即可，选择默认路径(~/.ssh)</p>
<h3 id="新建第二个-SSH-key"><a href="#新建第二个-SSH-key" class="headerlink" title="新建第二个 SSH key"></a>新建第二个 SSH key</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ ssh-keygen -t rsa -C &quot;user2@email.com&quot;</span><br><span class="line"># 设置名称为Enter file in which to save the key (/c/Users/Administrator/.ssh/id_rsa): /指定一个路径/id_rsa_user2名称</span><br></pre></td></tr></table></figure>
<h2 id="查看-SSH-KEY"><a href="#查看-SSH-KEY" class="headerlink" title="查看 SSH KEY"></a>查看 SSH KEY</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ cat ~/.ssh/id_rsa.pub</span><br><span class="line">ssh-rsa 公开密钥的内容 your_email@example.com</span><br></pre></td></tr></table></figure>
<p>如果创建时输入了文件名，上方的<code>id_rsa</code>替换成文件名。</p>
<h2 id="为不同网站应用各自的-SSH-KEY"><a href="#为不同网站应用各自的-SSH-KEY" class="headerlink" title="为不同网站应用各自的 SSH KEY"></a>为不同网站应用各自的 SSH KEY</h2><p>在 ~/.ssh 目录下创建 config 文件：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ vim ~/.ssh/config</span><br></pre></td></tr></table></figure></p>
<p>输入以下信息：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 第一个host</span><br><span class="line">Host github.com</span><br><span class="line">    HostName github.com</span><br><span class="line">    User git</span><br><span class="line">    IdentityFile ~/.ssh/id_rsa_a</span><br><span class="line"></span><br><span class="line"># 第二个host</span><br><span class="line">Host git.xxxxxx.com</span><br><span class="line">    HostName git.xxxxxx.net</span><br><span class="line">    User git</span><br><span class="line">    IdentityFile ~/.ssh/id_rsa_b</span><br></pre></td></tr></table></figure></p>
<p>再把对应的公钥添加至对应的网站上面。<br>注解：未加入配置文件的网站会自动应用id_rsa。<br>至此，多个 SSH KEY 就可以同时使用了。</p>
<h2 id="GIT-CONFIG"><a href="#GIT-CONFIG" class="headerlink" title="GIT CONFIG"></a>GIT CONFIG</h2><p>像 github 或者 gitlab 等网站都会要求验证身份。通常情况下配置一个全局信息就可以了，针对一些特殊情况，如果需要配置多个身份信息，可以为项目单独配置。</p>
<p><strong>配置全局信息</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global user.name &quot;Firstname Lastname&quot;</span><br><span class="line">$ git config --global user.email &quot;your_email@example.com&quot;</span><br></pre></td></tr></table></figure>
<p>这个命令会在   ~/.gitconfig   填入以下信息：</p>
<p>[user]<br>  name = Firstname Lastname<br>  email = <a href="mailto:your_email@example.com" target="_blank" rel="noopener">your_email@example.com</a></p>
<p>如果需要修改信息，直接修改这个文件即可。</p>
<p>另外，显示当前的git配置信息：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --list</span><br></pre></td></tr></table></figure>
<p><strong>配置单独信息</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ cd your_project</span><br><span class="line">$ git config user.name &quot;Firstname Lastname&quot;</span><br><span class="line">$ git config user.email &quot;your_email@example.com&quot;</span><br></pre></td></tr></table></figure></p>
<p>这个命令会在项目目录下输出文件：/.git／config<br>这里设置的姓名和邮箱地址会用在 Git 的提交日志中。</p>
</div></article></div></main><footer><div class="paginator"><a href="/201706/Hexo使用Travis自动化构建+部署/" class="prev">PREV</a><a href="/201705/WebVR/" class="next">NEXT</a></div><div class="copyright"><p>© 2016 - 2018 <a href="https://nirodu.com">NiroDu</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>